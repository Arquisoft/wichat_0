ifndef::imagesdir[:imagesdir: ../images]

[[section-building-block-view]]


== Building Block View

ifdef::arc42help[]
[role="arc42help"]
****
.Content
The building block view shows the static decomposition of the system into building blocks (modules, components, subsystems, classes, interfaces, packages, libraries, frameworks, layers, partitions, tiers, functions, macros, operations, data structures, ...) as well as their dependencies (relationships, associations, ...)

This view is mandatory for every architecture documentation.
In analogy to a house this is the _floor plan_.

.Motivation
Maintain an overview of your source code by making its structure understandable through
abstraction.

This allows you to communicate with your stakeholder on an abstract level without disclosing implementation details.

.Form
The building block view is a hierarchical collection of black boxes and white boxes
(see figure below) and their descriptions.

image::05_building_blocks-EN.png["Hierarchy of building blocks"]

*Level 1* is the white box description of the overall system together with black
box descriptions of all contained building blocks.

*Level 2* zooms into some building blocks of level 1.
Thus it contains the white box description of selected building blocks of level 1, together with black box descriptions of their internal building blocks.

*Level 3* zooms into selected building blocks of level 2, and so on.


.Further Information

See https://docs.arc42.org/section-5/[Building Block View] in the arc42 documentation.

****
endif::arc42help[]

=== Whitebox Overall System

image::05_overall_system.png[Overview Diagram]

Motivation::

The Wichat EN2B system is designed to provide users with an interactive quiz platform where they can register, log in, answer questions generated dynamically from WikiData, 
request hints from an LLM in a conversational manner, and track their statistics over time. The architecture is modular to ensure scalability, maintainability, and separation of concerns.

Contained Building Blocks::

[cols="1,2" options="header"]
|===
| Name | Responsibility
| Web Application | Provides the front-end interface for users to interact with the system.
| Gateway Service | Acts as an API gateway that routes requests to appropriate backend services.
| Game Service | Manages quiz generation, pulling questions from WikiData.
| LLM Service | Handles interactions with the LLM to provide hints for users.
| User Gateway | Facilitates communication between the Gateway Service and user-related services.
| User CRUD Service | Manages user information in the database (registration, profile management, etc.).
| User Authentication Service | Handles authentication and session management.
| MongoDB Database | Stores user information and quiz-related data.
| Documentation System | Manages internal documentation.
|===

ifdef::arc42help[]
[role="arc42help"]
****
Insert your explanations of black boxes from level 1:

If you use tabular form you will only describe your black boxes with name and
responsibility according to the following schema:

[cols="1,2" options="header"]
|===
| **Name** | **Responsibility**
| _<black box 1>_ | _<Text>_
| _<black box 2>_ | _<Text>_
|===

If you use a list of black box descriptions then you fill in a separate black box template for every important building block .
Its headline is the name of the black box.
****
endif::arc42help[]

==== Web Application

Purpose/Responsibility::

The Web Application provides the user interface for the quiz platform, enabling users to register, log in, take quizzes, request hints and view their historical statistics.

Interfaces::

1. Calls the Gateway Service to fetch quiz questions and send user responses
2. Requests authentication
3. Displays user statistics
4. Update logged in user's data
5. Provides a conversational hint system

Endpoints::

`GET /signup` - Shows the signup screen to the user

`POST /signup` - Sends the sign up information to the gateway service

`GET /login` - Shows the signup screen to the user

`POST /login` - Sends the sign up information to the gateway service

`GET /quiz` - Shows the user a question from a quiz whose theme is specified as parameter

`POST /quiz` - Submits the answer to the gateway service

`GET /edit`- Shows the user a form in order to edit their data

`POST /edit` - Sends the updated information to the gateway service

`GET /stats` - Shows the user their game stats

==== Gateway Service

Purpose/Responsibility::
Acts as the main entry point for API requests, routing them to the appropriate backend services. It serves as a security layer and load balancer

Interfaces::

1. Routes quiz-related requests to the Game Service
2. Routes user crud-related requests to the Users Service
3. Routes login requests to the Users Authentication Service
4. Routes hint requests to the LLM Service

Endpoints::

`GET /health` - Shows health status of the system

`GET /quiz` - Retrieves quiz questions

`POST /quiz` - Submits user answers

`POST /login` - Authenticates user requests

`POST /adduser` - Registers new users

`POST /edituser` - Edits user information

`GET /stats` - Requests a user historical playing data

`POST /askllm` - Sends a question to the LLM Service

==== Game Service

Purpose/Responsibility::
Manages the quiz logic, fetching questions from WikiData and providing them to users

Interfaces::

1. Fetches question batches from WikiData

2. Serves quiz questions to the Gateway Service

3. Stores statistics in MongoDB

Endpoints::

GET /quiz - Retrieves a batch of quiz questions from WikiData

POST /quiz - Validates a user's answer

==== <Name interface 1>

...

==== <Name interface m>



=== Level 2

ifdef::arc42help[]
[role="arc42help"]
****
Here you can specify the inner structure of (some) building blocks from level 1 as white boxes.

You have to decide which building blocks of your system are important enough to justify such a detailed description.
Please prefer relevance over completeness. Specify important, surprising, risky, complex or volatile building blocks.
Leave out normal, simple, boring or standardized parts of your system
****
endif::arc42help[]

==== White Box _<building block 1>_

ifdef::arc42help[]
[role="arc42help"]
****
...describes the internal structure of _building block 1_.
****
endif::arc42help[]

_<white box template>_

==== White Box _<building block 2>_


_<white box template>_

...

==== White Box _<building block m>_


_<white box template>_



=== Level 3

ifdef::arc42help[]
[role="arc42help"]
****
Here you can specify the inner structure of (some) building blocks from level 2 as white boxes.

When you need more detailed levels of your architecture please copy this
part of arc42 for additional levels.
****
endif::arc42help[]

==== White Box <_building block x.1_>

ifdef::arc42help[]
[role="arc42help"]
****
Specifies the internal structure of _building block x.1_.
****
endif::arc42help[]

_<white box template>_


==== White Box <_building block x.2_>

_<white box template>_



==== White Box <_building block y.1_>

_<white box template>_
