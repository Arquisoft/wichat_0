ifndef::imagesdir[:imagesdir: ../images]

[[section-context-and-scope]]
== Context and Scope


ifdef::arc42help[]
[role="arc42help"]
****
.Contents
Context and scope - as the name suggests - delimits your system (i.e. your scope) from all its communication partners
(neighboring systems and users, i.e. the context of your system). It thereby specifies the external interfaces.

If necessary, differentiate the business context (domain specific inputs and outputs) from the technical context (channels, protocols, hardware).

.Motivation
The domain interfaces and technical interfaces to communication partners are among your system's most critical aspects. Make sure that you completely understand them.

.Form
Various options:

* Context diagrams
* Lists of communication partners and their interfaces.


.Further Information

See https://docs.arc42.org/section-3/[Context and Scope] in the arc42 documentation.

****
endif::arc42help[]

=== Business Context

ifdef::arc42help[]
[role="arc42help"]
****
.Contents
Specification of *all* communication partners (users, IT-systems, ...) with explanations of domain specific inputs and outputs or interfaces.
Optionally you can add domain specific formats or communication protocols.

.Motivation
All stakeholders should understand which data are exchanged with the environment of the system.

.Form
All kinds of diagrams that show the system as a black box and specify the domain interfaces to communication partners.

Alternatively (or additionally) you can use a table.
The title of the table is the name of your system, the three columns contain the name of the communication partner, the inputs, and the outputs.

**<Diagram or Table>**

**<optionally: Explanation of external domain interfaces>**

**The WIChat system**

****
endif::arc42help[]

WIChat is an interactive web-based quiz game application, inspired by "Saber y Ganar". Users can register, log in, and play the game, where they are presented with images and have to guess the associated place or object. The novelty lies in the integration of a conversational language model (LLM), which allows users to interact with the game and get hints for the answers dynamically. The questions and images are generated from Wikidata, providing an automated, real-time experience.

[plantuml,"Business Context Diagram",png]
----
@startuml
actor Player as user
actor Admin as admin
actor "External Developers" as extDevelopers

component WebApp [
  <<System>>
  Web App
]

component PlayerService [
  <<System>>
  Player Management
]

component QuestionService [
  <<System>>
  Question Management
]

component HintService [
    <<System>>
    Hint Generation
]

component RewardService [
    <<System>>
    Reward Management
]

component OwnAPIService [
    <<System>>
    History API Management
]

component LLmService [
    <<System>>
    LLM Management
]

component ExternalAPIService [
    <<extern>>
    External APIs (LLM, Wikidata, etc.)
]

database database [
    Database
]

user ...> WebApp: Plays
admin ...> WebApp: Administrate
WebApp -left-> QuestionService : Retrieves generated\nquestions for game
WebApp ---> PlayerService : Handles\nlogin and signup
WebApp ---> HintService : Requests hints\nbased on LLM analysis
WebApp ---> RewardService : Manages\nuser rewards
WebApp ---> OwnAPIService : Manages game history

HintService --> LLmService : Generates hints from LLM

ExternalAPIService --> LLmService : Provides metadata for questions
ExternalAPIService --> HintService : Provides metadata for hints

extDevelopers .right.> OwnAPIService : Retrieve question list

database <--> PlayerService : Stores user data
database <--> QuestionService : Stores questions
database <-down- RewardService : Stores rewards
OwnAPIService <-down- database
@enduml

----

==== Involved Actors

* **User**: Person who accesses the application to play one of the multiple games, review their history, manage their data, etc.
* **Administrator**: Responsible for managing system infrastructure and security.
* **WebApp**:Main interface of the system that connects with internal services.
* **Database**: MySQL used to store user information, game history, and question data.
* **External APIs**: External service used to retrieve image and metadata for question generation, provides AI-generated quiz questions and hints, etc.
* **External developers**:  Developers who interact with the API to retrieve and modify player data, questions, and game history.

==== Business Context Table

[options="header",cols="1,2,2"]
|===
| Communication Partner | Inputs | Outputs
| User | Login credentials, game interactions, answer selections | Quiz questions, score updates, hints, rewards
| Admin | System configurations, user management requests | System status updates, logs, user management responses
| Database | User data, game records, question storage | Stored authentication, game history, retrieved player and question data
| WebApp | User actions, API requests to internal services | UI responses, game content, interaction processing
| ExternalAPIService (LLM, Wikidata, etc.) | Quiz prompts, data requests for images and metadata | AI-generated questions, retrieved images, metadata, and hints
| LLM Provider | Quiz prompts, hint generation requests | AI-generated questions, answers, and hints
| WikiData | Data requests for images and metadata | Retrieved images and metadata for questions
| External Developers | API requests for player and question data | Retrieved player information, question lists, game history
|===

=== Technical Context

ifdef::arc42help[]
[role="arc42help"]
****
.Contents
Technical interfaces (channels and transmission media) linking your system to its environment. In addition a mapping of domain specific input/output to the channels, i.e. an explanation which I/O uses which channel.

.Motivation
Many stakeholders make architectural decision based on the technical interfaces between the system and its context. Especially infrastructure or hardware designers decide these technical interfaces.

.Form
E.g. UML deployment diagram describing channels to neighboring systems,
together with a mapping table showing the relationships between channels and input/output.

**<Diagram or Table>**

**<optionally: Explanation of technical interfaces>**

**<Mapping Input/Output to Channels>**

****
endif::arc42help[]

The system consists of several services developed in Java using Spring Boot, a web frontend using HTML, and a relational database. Communication between services is handled via REST API and HTTPS.

==== Technical Interfaces

[plantuml,"Technical Context Diagram",png]
----
actor Player as user
actor "External Developers" as developers
component WebApp [
  <<System>>
  Web App
]

component PlayerService [
  <<System>>
  PlayerService
]

component QuestionService [
  <<System>>
  QuestionService
]

component WikiData [
    <<extern>>
    Wikidata
]

component LLMService [
    <<extern>>
    LLMService
]

component LLMAPI [
    <<system>>
    LLM API
]

component QuestionGenerator [
    <<system>>
    QuestionGenerator
]

component QuestionGenerator [
    <<system>>
    QuestionGenerator
]

component RestApiService [
    <<system>>
    RestApiService
]

database Database [
    Database
]

user .left.> WebApp: HTTPS
WebApp ---> PlayerService : Handles\nlogin, signup\nand game history
WebApp -left-> QuestionService : Retrieves generated\nquestions for game
QuestionGenerator <-up- WikiData : Get entity info\nfrom SPARQL HTTP
QuestionGenerator --> QuestionService : Generate questions\nwith entity data
QuestionService <--> Database: Save\nquestion\nentities
QuestionService <--> Database: Retrieve\nsaved\nquestions
developers .up---.> RestApiService : HTTP request
developers <.up. RestApiService : HTTP GET
RestApiService -up-> QuestionService: Retrieve/Modify questions
RestApiService ---> PlayerService: Retrieve/Modify player data

----

[options="header",cols="1,2,2"]
|===
| Component | Technology | Interface
| Web Application | HTML, Spring (Java) | Connects to backend services via HTTPS
| User Service | Spring (Java) | REST API for managing user data (login, history)
| Question Service | Spring (Java) | REST API to retrieve and display questions and images
| LLM Service | External (REST API) | Connects to external LLM provider for dynamic hints
| WikiData Service | External (REST API) | Retrieves image and question metadata from Wikidata
| Database | MySQL | Stores user data, game history, and question data
|===

==== Mapping Input/Output to Channels

[options="header",cols="1,2,2"]
|===
| Component | Input/Output | Channel/Protocol
| RestApiService | External developer interactions | HTTPS
| Frontend | User interactions, game display | HTTPS
| Database | User data, game history, questions | Specific database driver (MySQL)
| WikiData | Data for question generation | HTTP
| LLM Service | Hint generation, AI responses |  HTTPS
| Question Generator | Generated questions | In-memory
| Question Service | Questions for game | In-memory
| Player Service | Player data | In-memory
| Own API Service | External Developers | HTTP
|===

[options="header",cols="1,2,2"]
|===
| Participant | Communication Channel | Purpose
| Player | HTTPS (Web App) | Interacts with the system (login, play, receive questions)
| External Developers | HTTP (External API Service) | Access question database
| Web Application | HTTPS | Connects to backend services
| Question Generator | HTTP (WikiData) | Retrieves entity information
| LLM API | HTTPS (LLM Service) | Requests hints for questions
| Database | SQL Connection | Stores user and game data
|===
