/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C2*/SET SCHEMA PUBLIC
create table answer (id bigint not null, correct boolean not null, text varchar(255), question_id bigint, primary key (id))
create table api_key (id bigint not null, key_token varchar(255), player_id bigint, primary key (id))
create table category (id bigint not null, description varchar(255), name varchar(255), primary key (id))
create table game_session (id bigint not null, correct_questions integer, created_at timestamp(6), finish_time timestamp(6), score integer not null, total_questions integer, player_id bigint, primary key (id))
create table multiplayer_session (id bigint not null, multiplayer_code varchar(255), primary key (id))
create table multiplayer_session_player_scores (multiplayer_session_id bigint not null, player_scores integer, player_scores_key bigint not null, primary key (multiplayer_session_id, player_scores_key))
create table player (id bigint not null, email varchar(255) not null, multiplayer_code integer, password varchar(255) not null, score_multiplayer_code varchar(255), username varchar(255) not null, primary key (id))
create table player_roles (players_id bigint not null, roles_name varchar(255) not null, primary key (players_id, roles_name))
create table question (id bigint not null, language varchar(255), statement varchar(255), category_id bigint, correct_answer_id bigint, primary key (id))
create table rest_api_access_log (id bigint not null, details VARCHAR(10000), path varchar(255), api_key_id bigint, primary key (id))
create table role (name varchar(255) not null, primary key (name))
alter table api_key add constraint UK9sxm5it35egis6hyx6wbb9n7x unique (key_token)
alter table api_key add constraint UKfxwsegay2uon5pmy07vhvxj5g unique (player_id)
alter table category add constraint UK46ccwnsi9409t36lurvtyljak unique (name)
alter table player add constraint UKoivbimcon0iqmb8efpv723h08 unique (email)
alter table player add constraint UKo39xn8lmj05iew7d2tgw836jy unique (username)
alter table question add constraint UKhqo9tw4adb2cmwrc1t9q5udnh unique (correct_answer_id)
create sequence answer_seq start with 1 increment by 50
create sequence api_key_seq start with 1 increment by 50
create sequence category_seq start with 1 increment by 50
create sequence game_session_seq start with 1 increment by 50
create sequence multiplayer_session_seq start with 1 increment by 50
create sequence player_seq start with 1 increment by 50
create sequence question_seq start with 1 increment by 50
create sequence rest_api_access_log_seq start with 1 increment by 50
alter table answer add constraint FK8frr4bcabmmeyyu60qt7iiblo foreign key (question_id) references question
alter table api_key add constraint FK48sfrv501iycjds0suwwm1vdt foreign key (player_id) references player
alter table game_session add constraint FKq4xkwif04lyprqha8x1m9j846 foreign key (player_id) references player
alter table multiplayer_session_player_scores add constraint FK7rrlufjybecovlvtyrqq4q2mk foreign key (player_scores_key) references player
alter table multiplayer_session_player_scores add constraint FKdt977k5rswhdluy30abw160a8 foreign key (multiplayer_session_id) references multiplayer_session
alter table player_roles add constraint FKku4eatcg5ay4ogyq7l9m4rpb8 foreign key (roles_name) references role
alter table player_roles add constraint FK1cc88tcmkoyo263xdc766p0ay foreign key (players_id) references player
alter table question add constraint FK7jaqbm9p4prg7n91dd1uabrvj foreign key (category_id) references category
alter table question add constraint FK9r5b7vwde9muv0m0ts6ai0kw8 foreign key (correct_answer_id) references answer
alter table rest_api_access_log add constraint FKf7wqa02dltls29h0wfettp8sv foreign key (api_key_id) references api_key
INSERT INTO CATEGORY VALUES(1,'Questions about geography','Geography')
ALTER SEQUENCE PUBLIC.CATEGORY_SEQ RESTART WITH 51
COMMIT
/*C3*/SET SCHEMA PUBLIC
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C2*/ALTER SEQUENCE PUBLIC.CATEGORY_SEQ RESTART WITH 101
ALTER SEQUENCE PUBLIC.ANSWER_SEQ RESTART WITH 4651
ALTER SEQUENCE PUBLIC.QUESTION_SEQ RESTART WITH 1201
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
DISCONNECT
